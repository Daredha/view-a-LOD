<table class="table" *ngIf="node">
  <tbody>
    <ng-container *ngFor="let nodeItem of node | keyvalue">
      <tr
        *ngIf="getVisibility(nodeItem.key) === PredicateVisibility.AlwaysShow"
      >
        <td class="w-1/2">
          <!--          <ng-icon-->
          <!--            name="featherArrowRight"-->
          <!--            *ngIf="nodeItem.value.direction === Direction.Outgoing"-->
          <!--            class="opacity-40"-->
          <!--          />-->

          <ng-icon
            name="featherArrowLeft"
            *ngIf="nodeItem.value.direction === Direction.Incoming"
            class="opacity-40"
          />

          <app-node-link
            [url]="nodeItem.key"
            [label]="replacePrefixes(nodeItem.key)"
          />
        </td>
        <td class="w-1/2">
          <div *ngFor="let value of nodeObjAsArray(nodeItem.value)">
            <app-node-link [url]="value" [label]="replacePrefixes(value)" />
          </div>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>

<button
  class="text-xs mt-4"
  (click)="showingDetails = !showingDetails"
  *ngIf="getNumOfVisiblePreds(PredicateVisibility.ShowInDetailView) > 0"
>
  <ng-icon
    [name]="showingDetails ? 'featherChevronUp' : 'featherChevronDown'"
    class="relative top-[0.1rem]"
  />
  <!--  TODO: Add translation -->
  {{ showingDetails ? "Hide details" : "Show details" }}
</button>

<!-- TODO: Refactor into re-usable table component -->
<table class="table text-xs opacity-70" *ngIf="node && showingDetails">
  <tbody>
    <ng-container *ngFor="let nodeItem of node | keyvalue">
      <tr
        *ngIf="
          getVisibility(nodeItem.key) === PredicateVisibility.ShowInDetailView
        "
      >
        <td class="w-1/2">
          <!--          <ng-icon-->
          <!--            name="featherArrowRight"-->
          <!--            *ngIf="nodeItem.value.direction === Direction.Outgoing"-->
          <!--            class="opacity-40"-->
          <!--          />-->

          <ng-icon
            name="featherArrowLeft"
            *ngIf="nodeItem.value.direction === Direction.Incoming"
            class="opacity-40"
          />

          <app-node-link
            [url]="nodeItem.key"
            [label]="replacePrefixes(nodeItem.key)"
          />
        </td>
        <td class="w-1/2">
          <div *ngFor="let value of nodeObjAsArray(nodeItem.value)">
            <app-node-link [url]="value" [label]="replacePrefixes(value)" />
          </div>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>
